import { useEffect, useRef } from "react";
import { motion } from "framer-motion";

// ----------
// Portfolio Replica — Dark Grid
// Inspired by joseph.cv layout: sticky header, 12-col grid, project cards, ticker footer.
// TailwindCSS required in host app. Drop this file into a React project and render <PortfolioReplica />.
// Replace content in DATA below with your own (names, copy, images, links).
// ----------

const DATA = {
  name: "Johann Steinhoff",
  role: "Interaction / CS Student",
  location: "Houston / San Marcos, TX",
  email: "mailto:you@example.com",
  about:
    "I design and build interactive systems. I like complex, ambiguous problem spaces around AI tools, digital craftsmanship, and multimodal interfaces.",
  highlights: [
    {
      team: "Notion",
      when: "2025 – Present",
      desc: "Building beautiful tools for your life’s work.",
    },
    {
      team: "Azuki",
      when: "2023 – 2025",
      desc: "First design hire. Scaled team to 5. Built social/interactive experiences.",
    },
    {
      team: "Independent Practice",
      when: "—",
      desc: (
        <>
          Design consulting for emerging AI & productivity companies. Notable clients include
          {" "}
          <a className="link" href="https://cursor.sh/" target="_blank" rel="noreferrer">Cursor</a>
          {" • "}
          <a className="link" href="https://www.rox.com/" target="_blank" rel="noreferrer">Rox</a>
          {" • "}
          <a className="link" href="https://natural.ai/#/" target="_blank" rel="noreferrer">Brain Technologies</a>.
        </>
      ),
    },
    {
      team: "Skiff",
      when: "2022 – 2023",
      desc: (
        <>
          0→1 design for Mail, Editor, Drive, Calendar. Acquired by Notion.
          {" "}
          <a className="link" href="https://www.notion.so/blog/meet-skiff-the-newest-member-of-the-notion-family" target="_blank" rel="noreferrer">(read)</a>
        </>
      ),
    },
    {
      team: "Apple",
      when: "2020 – 2021",
      desc: "Conversational AI patterns and multimodal behaviors for Siri (AI/ML).",
    },
  ],
  projects: [
    {
      title: "Anime.com",
      tag: "Consumer Social",
      locked: true,
      mediaType: "image",
      src: "https://images.unsplash.com/photo-1517694712202-14dd9538aa97?q=80&w=1600&auto=format&fit=crop",
      href: "#",
    },
    {
      title: "Azuki",
      tag: "Consumer Product",
      mediaType: "image",
      src: "https://images.unsplash.com/photo-1518349619113-03114f06ac3a?q=80&w=1600&auto=format&fit=crop",
      href: "#",
    },
    {
      title: "Skiff",
      tag: "Productivity",
      mediaType: "image",
      badge: "Acquired by Notion",
      src: "https://images.unsplash.com/photo-1526378722484-bd91ca387e72?q=80&w=1600&auto=format&fit=crop",
      href: "#",
    },
    {
      title: "Cursor AI",
      tag: "AI Tooling",
      mediaType: "image",
      src: "https://images.unsplash.com/photo-1498050108023-c5249f4df085?q=80&w=1600&auto=format&fit=crop",
      href: "#",
    },
    {
      title: "Thinkspace",
      tag: "Assistive AI Agents",
      mediaType: "video",
      src: "https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4",
      href: "#",
    },
    {
      title: "Multimodal Search",
      tag: "Brain Technologies",
      mediaType: "video",
      src: "https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerFun.mp4",
      href: "#",
    },
    {
      title: "Skiff Pages",
      tag: "Editor Tool",
      mediaType: "image",
      src: "https://images.unsplash.com/photo-1515879218367-8466d910aaa4?q=80&w=1600&auto=format&fit=crop",
      href: "#",
      anchor: "#editor",
    },
    {
      title: "AIGA Hue",
      tag: "Data Visualization",
      mediaType: "image",
      src: "https://images.unsplash.com/photo-1472289065668-ce650ac443d2?q=80&w=1600&auto=format&fit=crop",
      href: "#",
    },
    {
      title: "LIGHT ENGINE",
      tag: "Industrial Design",
      mediaType: "image",
      src: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?q=80&w=1600&auto=format&fit=crop",
      href: "#",
    },
    {
      title: "Apple",
      tag: "Conversational AI",
      mediaType: "video",
      src: "https://storage.googleapis.com/gtv-videos-bucket/sample/VolkswagenGTI_review.mp4",
      href: "#",
    },
    {
      title: "Brain Technologies",
      tag: "Conversational AI",
      mediaType: "image",
      src: "https://images.unsplash.com/photo-1600267175161-cfaa711b4a52?q=80&w=1600&auto=format&fit=crop",
      href: "#",
    },
    {
      title: "Skiff Mail",
      tag: "Productivity Tooling",
      mediaType: "image",
      src: "https://images.unsplash.com/photo-1544739313-616c076b8649?q=80&w=1600&auto=format&fit=crop",
      href: "#mail",
    },
    {
      title: "Pixel Push",
      tag: "Multiplayer Art",
      mediaType: "video",
      src: "https://storage.googleapis.com/gtv-videos-bucket/sample/TearsOfSteel.mp4",
      href: "#",
    },
  ],
  footerLinks: [
    { label: "Reading", href: "#reading" },
    { label: "Journal", href: "#journal" },
    { label: "LinkedIn", href: "https://www.linkedin.com/" },
    { label: "Instagram", href: "https://www.instagram.com/" },
    { label: "Twitter", href: "https://twitter.com/" },
  ],
};

function Ticker({ text }) {
  const ref = useRef(null);
  useEffect(() => {
    const el = ref.current;
    if (!el) return;
    el.animate(
      [
        { transform: "translateX(0)" },
        { transform: "translateX(-50%)" },
      ],
      { duration: 18000, iterations: Infinity, easing: "linear" }
    );
  }, []);
  return (
    <div className="overflow-hidden relative w-full text-xs text-zinc-600">
      <div ref={ref} className="whitespace-nowrap">
        {Array(6)
          .fill(null)
          .map((_, i) => (
            <span key={i} className="mr-8">
              ▞▚▞▚▞▚▞ _Copyright_2025_ ▞▚▞▚▞▚▞ _Next.JS_Vercel_ ▞▚▞▚▞▚▞ _INPUT_MONO_
            </span>
          ))}
      </div>
    </div>
  );
}

function ProjectCard({ p }) {
  return (
    <a href={p.href} className="relative group select-none">
      <div className="relative overflow-hidden rounded-xl border border-white/10 bg-white/5">
        {p.mediaType === "video" ? (
          <video
            className="w-full h-full object-cover"
            playsInline
            loop
            autoPlay
            muted
            src={p.src}
          />
        ) : (
          <img src={p.src} alt={p.title} className="w-full h-full object-cover" />
        )}
        {p.badge && (
          <div className="absolute bottom-3 left-1/2 -translate-x-1/2 z-20 bg-white text-black px-3 py-1 rounded-full border border-black/20">
            <p className="text-[11px] tracking-wide uppercase">{p.badge}</p>
          </div>
        )}
        {p.locked && (
          <span className="absolute top-3 right-3 text-[11px] px-2 py-1 rounded-md bg-black/70 text-white shadow-xl">
            LOCKED
          </span>
        )}
        <div className="absolute inset-0 bg-white/[0.03] opacity-0 group-hover:opacity-100 transition-opacity" />
      </div>
      <div className="mt-3">
        <h3 className="text-zinc-50 text-sm font-medium">{p.title}</h3>
        <p className="text-zinc-500 text-xs">{p.tag}</p>
      </div>
    </a>
  );
}

export default function PortfolioReplica() {
  return (
    <div className="min-h-screen w-full bg-[#111] text-white">
      {/* Header */}
      <header className="sticky top-0 z-50 border-b border-white/10 bg-[#111]/80 backdrop-blur">
        <div className="max-w-7xl mx-auto px-4 py-4 grid grid-cols-12 gap-3 items-center">
          <a href="#" className="col-span-6 md:col-span-4 hover:text-yellow-300">
            <h1 className="text-base font-semibold tracking-tight">{DATA.name}</h1>
          </a>
          <p className="col-span-6 md:col-span-4 text-sm text-zinc-200">{DATA.role}</p>
          <p className="hidden md:block md:col-span-4 text-sm text-zinc-400 text-right">{DATA.location}</p>
        </div>
      </header>

      {/* About + Timeline */}
      <main className="max-w-7xl mx-auto px-4">
        <section className="grid grid-cols-12 gap-6 py-8">
          <div className="col-span-12 md:col-span-5 space-y-3">
            <p className="text-xs uppercase tracking-wider text-white/40">About</p>
            <p className="text-sm leading-relaxed text-zinc-100">
              {DATA.about} If you have an interesting idea, please{" "}
              <a className="link" href={DATA.email}>get in touch</a>.
            </p>
          </div>

          <div className="col-span-12 md:col-span-7 grid grid-cols-6 gap-x-3 gap-y-4">
            <p className="col-span-2 text-xs uppercase tracking-wider text-white/40">Team</p>
            <p className="col-span-4 text-xs uppercase tracking-wider text-white/40">Description</p>

            {DATA.highlights.map((h) => (
              <>
                <h4 className="col-span-2 text-sm font-medium text-white" key={h.team+"t"}>
                  {h.team}
                  <br />
                  <span className="font-normal text-zinc-300">{h.when}</span>
                </h4>
                <p className="col-span-4 text-sm text-zinc-200" key={h.team+"d"}>{h.desc}</p>
              </>
            ))}
          </div>
        </section>

        {/* Projects Grid */}
        <section className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 pb-16">
          {DATA.projects.map((p, i) => (
            <motion.div
              key={p.title + i}
              initial={{ opacity: 0, y: 8 }}
              whileInView={{ opacity: 1, y: 0 }}
              viewport={{ once: true, amount: 0.2 }}
              transition={{ duration: 0.4, delay: i * 0.03 }}
            >
              <ProjectCard p={p} />
            </motion.div>
          ))}
        </section>
      </main>

      {/* Footer */}
      <footer className="bg-[#1C1C1C] border-t border-white/10">
        <div className="max-w-7xl mx-auto px-4 py-8 grid grid-cols-12 gap-6 text-sm">
          <div className="col-span-12 md:col-span-6 space-y-2">
            <span className="flex items-center gap-2">
              <span className="px-2 py-0.5 rounded-full border border-yellow-300 text-yellow-300 text-[11px] lowercase">v1.0.0</span>
              <span className="uppercase text-zinc-500 text-[11px]">Last updated — today</span>
            </span>
          </div>
          <div className="col-span-12 sm:col-span-3 space-y-1">
            {DATA.footerLinks.map((l, i) => (
              <p key={i}>
                <a className="link" href={l.href} target={l.href.startsWith("http") ? "_blank" : undefined} rel="noreferrer">
                  {l.label}
                </a>
              </p>
            ))}
          </div>
          <div className="col-span-12 sm:col-span-3">
            <p>Let\'s build something together.</p>
            <p>
              <a className="link" href={DATA.email}>you@example.com</a>
            </p>
          </div>
        </div>
        <Ticker />
      </footer>

      {/* Styles that emulate the dotted links & card border vibe */}
      <style>{`
        .link { border-bottom: 1px dotted rgba(234, 179, 8, 0.6); padding: 0 2px; }
        .link:hover { color: rgb(234 179 8); background: rgba(234, 179, 8, 0.08); }
      `}</style>
    </div>
  );
}
